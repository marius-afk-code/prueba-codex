{% extends "base.html" %}
{% block title %}Detalle partido{% endblock %}

{% block content %}
  <h2>Detalle del partido</h2>
  <div class="detail-card">
    <p><strong>Fecha:</strong> {{ partido.date.strftime('%Y-%m-%d') }}</p>
    <p><strong>Rival:</strong> {{ partido.opponent }}</p>
    <p><strong>Goles a favor:</strong> {{ partido.goals_for }}</p>
    <p><strong>Goles en contra:</strong> {{ partido.goals_against }}</p>
    <p><strong>Notas:</strong> {{ partido.notes_short or '-' }}</p>
  </div>

  <h3>Eventos de gol</h3>
  {% if partido.goal_events %}
    <div class="table-wrapper">
      <table>
        <thead>
          <tr>
            <th>Tipo</th>
            <th>Minuto</th>
            <th>Jugada</th>
            <th>Subtipo ABP</th>
            <th>Inicio (x,y)</th>
            <th>Fin (x,y)</th>
          </tr>
        </thead>
        <tbody>
          {% for event in partido.goal_events %}
            <tr>
              <td>{{ 'A favor' if event.for_or_against == 'for' else 'En contra' }}</td>
              <td>{{ event.minute }}</td>
              <td>{{ event.play_type }}</td>
              <td>{{ event.abp_subtype or '-' }}</td>
              <td>({{ '%.1f'|format(event.x_start) }}, {{ '%.1f'|format(event.y_start) }})</td>
              <td>
                {% if event.x_end is not none and event.y_end is not none %}
                  ({{ '%.1f'|format(event.x_end) }}, {{ '%.1f'|format(event.y_end) }})
                {% else %}
                  -
                {% endif %}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <p class="empty">No hay eventos de gol cargados.</p>
  {% endif %}
{% endblock %}
